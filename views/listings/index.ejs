<% layout('/layouts/boilerplate') %>

<style>

  .tax-info{

    display: none;

  }

  .tax-toggle{

    border: 1px solid #ced4da !important;
    border-radius: 1rem !important;
    height: 3.5rem;
    padding: 1rem;
    width: 15rem;
    margin-bottom: 20px;

  }

</style>

<% if(success && success.length > 0) { %>
  <div class="alert alert-success alert-dismissible fade show col-6 offset-3 mt-4" role="alert">
    <%= success %>
    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
  </div>
<% } %>

<% if(error && error.length > 0) { %>
  <div class="alert alert-danger alert-dismissible fade show col-6 offset-3 mt-4" role="alert">
    <%= error %>
    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
  </div>
<% } %>

<div class="tax-toggle">
<div class="form-check form-switch">
  <input class="form-check-input" type="checkbox" value="" id="checkNativeSwitch" switch>
  <label class="form-check-label" for="checkNativeSwitch">
    Display Total After Tax
  </label>
</div>
</div>

<div class="row row-cols-lg-3 row-cols-md-2 row-cols-sm-1">
    <% for(let data of allData) { %>
        <div class="card col list-card">
            <a href="/listings/<%= data._id %>" style="text-decoration: none; color: inherit">
                <img src="<%= data.image.url %>" class="card-img-top" alt="listing image" style="height: 20rem">
                <div class="card-img-overlay"></div>
                <div class="card-body">
                    <p class="card-text">
                        <b><%= data.title %></b><br>
                        &#8377; <%= data.price.toLocaleString("en-IN") %>
                        <i class="tax-info"> &nbsp; +18% GST</i>
                    </p>
                </div>
            </a>
        </div>
    <% } %>   
</div>

<script>

let ele = document.getElementById('checkNativeSwitch');

ele.addEventListener('click' , function(){
  
  let taxele = document.getElementsByClassName('tax-info');

  for(info of taxele){

    info.style.display = (info.style.display === 'none' || info.style.display === '') ? 'inline' : 'none';
    
  }

});

</script>